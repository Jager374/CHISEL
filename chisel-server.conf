# Chisel 服务端配置文件
# 版本: 1.0
# 描述: chisel 服务端的配置参数

# =============================================================================
# 基础网络配置
# =============================================================================

# 监听主机地址 (0.0.0.0 表示监听所有接口)
SERVER_HOST="0.0.0.0"

# 监听端口
SERVER_PORT="8080"

# =============================================================================
# 安全配置
# =============================================================================

# SSH 密钥文件路径 (如果不存在会自动生成)
KEY_FILE="/etc/chisel/server.key"

# 用户认证文件路径
AUTH_FILE="/etc/chisel/users.json"

# 单用户认证 (格式: username:password，留空则使用 AUTH_FILE)
AUTH_USER=""

# =============================================================================
# 功能配置
# =============================================================================

# 启用 SOCKS5 代理
ENABLE_SOCKS5="true"

# 启用反向端口转发
ENABLE_REVERSE="true"

# 后端代理服务器 (可选，用于隐藏 chisel 服务)
BACKEND_PROXY=""

# =============================================================================
# TLS/SSL 配置
# =============================================================================

# 启用 TLS
ENABLE_TLS="false"

# TLS 证书文件路径
TLS_CERT=""

# TLS 私钥文件路径
TLS_KEY=""

# 自动获取 Let's Encrypt 证书的域名 (需要端口 443)
TLS_DOMAIN=""

# TLS CA 证书路径 (用于客户端证书验证)
TLS_CA=""

# =============================================================================
# 连接配置
# =============================================================================

# 保活间隔 (格式: 30s, 5m, 1h)
KEEPALIVE="25s"

# =============================================================================
# 日志配置
# =============================================================================

# 启用详细日志
VERBOSE="false"

# 日志文件路径
LOG_FILE="/var/log/chisel/server.log"

# 日志级别 (debug, info, warn, error)
LOG_LEVEL="info"

# 日志轮转大小 (MB)
LOG_MAX_SIZE="100"

# 保留日志文件数量
LOG_MAX_FILES="10"

# =============================================================================
# 进程管理
# =============================================================================

# 生成 PID 文件
ENABLE_PID="true"

# PID 文件路径
PID_FILE="/var/run/chisel-server.pid"

# =============================================================================
# 监控配置
# =============================================================================

# 启用状态监控
ENABLE_MONITORING="true"

# 监控检查间隔 (秒)
MONITOR_INTERVAL="30"

# 最大客户端连接数 (0 表示无限制)
MAX_CLIENTS="0"

# =============================================================================
# 高级配置
# =============================================================================

# 自定义 HTTP 头部
CUSTOM_HEADERS=""

# 服务器指纹验证
SERVER_FINGERPRINT=""

# 额外的命令行参数
EXTRA_ARGS=""

# =============================================================================
# 集群配置
# =============================================================================

# 集群模式 (standalone, master, slave)
CLUSTER_MODE="standalone"

# 主节点地址 (仅在 slave 模式下使用)
MASTER_ADDRESS=""

# 集群认证密钥
CLUSTER_AUTH=""

# =============================================================================
# 备份和恢复
# =============================================================================

# 启用配置备份
ENABLE_BACKUP="true"

# 备份目录
BACKUP_DIR="/var/backup/chisel"

# 备份保留天数
BACKUP_RETENTION="30"
